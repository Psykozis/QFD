<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Correlação de Requisitos - Sistema QFD</title>
    <link rel="stylesheet" href="../css/style.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
</head>
<body>
    <header class="header">
        <div class="container">
            <h1><i class="fas fa-network-wired"></i> Correlação de Requisitos</h1>
            <p>Analise as relações entre requisitos de projeto - Telhado da Casa QFD</p>
        </div>
    </header>

    <nav class="navbar">
        <div class="container">
            <ul class="nav-menu">
                <li><a href="../index.html"><i class="fas fa-home"></i> Dashboard</a></li>
                <li>
                    <a href="#"><i class="fas fa-list"></i> Menu <i class="fas fa-chevron-down" style="font-size: 0.8rem; margin-left: 5px;"></i></a>
                    <div class="dropdown-content">
                        <a href="requisitos-cliente.html"><i class="fas fa-users"></i> Requisitos Cliente</a>
                        <a href="comparacao-cliente.html"><i class="fas fa-balance-scale"></i> Comparação Cliente</a>
                        <a href="requisitos-projeto.html"><i class="fas fa-project-diagram"></i> Requisitos Projeto</a>
                        <a href="correlacao-projeto.html"><i class="fas fa-network-wired"></i> Correlação Projeto</a>
                        <a href="matriz-qfd.html"><i class="fas fa-table"></i> Matriz QFD</a>
                        <a href="relatorio.html"><i class="fas fa-file-pdf"></i> Relatório PDF</a>
                    </div>
                </li>
                <li>
                    <a href="#"><i class="fas fa-database"></i> Backup & Export <i class="fas fa-chevron-down" style="font-size: 0.8rem; margin-left: 5px;"></i></a>
                    <div class="dropdown-content">
                        <a href="#" onclick="exportProjectData()"><i class="fas fa-download"></i> Exportar Backup (JSON)</a>
                        <a href="#" onclick="document.getElementById('import-file').click()"><i class="fas fa-upload"></i> Importar Backup (JSON)</a>
                        <hr>
                        <a href="#" onclick="document.getElementById('import-csv-cliente').click()"><i class="fas fa-file-csv"></i> Importar Req. Cliente (CSV)</a>
                        <a href="#" onclick="document.getElementById('import-csv-projeto').click()"><i class="fas fa-file-csv"></i> Importar Req. Projeto (CSV)</a>
                        <hr>
                        <a href="#" onclick="exportPageData('cliente')"><i class="fas fa-file-export"></i> Exportar Req. Cliente</a>
                        <a href="#" onclick="exportPageData('projeto')"><i class="fas fa-file-export"></i> Exportar Req. Projeto</a>
                        <a href="#" onclick="exportPageData('matriz')"><i class="fas fa-file-export"></i> Exportar Matriz QFD</a>
                        <hr>
                        <a href="#" onclick="exportCorrelacoes('csv')"><i class="fas fa-file-csv"></i> Exportar Correlações (CSV)</a>
                        <a href="#" onclick="importCorrelacoes()"><i class="fas fa-file-csv"></i> Importar Correlações (CSV)</a>
                    </div>
                </li>
            </ul>
            <input type="file" id="import-file" style="display: none;" onchange="importProjectData(event)" accept=".json">
            <input type="file" id="import-csv-cliente" style="display: none;" onchange="importCSV(event, 'cliente')" accept=".csv">
            <input type="file" id="import-csv-projeto" style="display: none;" onchange="importCSV(event, 'projeto')" accept=".csv">
            <input type="file" id="import-csv-correlacoes" style="display: none;" onchange="importCorrelacoesCsv(event)" accept=".csv">
        </div>
    </nav>

    <main class="main-content">
        <div class="container">
            <div class="page-header">
                <h2>Correlação entre Requisitos de Projeto</h2>
                <p>Analise como os requisitos técnicos se relacionam entre si. Esta análise forma o "telhado" da casa QFD e ajuda a identificar sinergias e conflitos entre os requisitos.</p>
            </div>

            <!-- Status da correlação -->
            <div class="card status-card">
                <div class="status-info">
                    <div class="status-item">
                        <div class="status-icon">
                            <i class="fas fa-project-diagram"></i>
                        </div>
                        <div class="status-content">
                            <h4 id="total-requisitos">0 Requisitos</h4>
                            <p>Requisitos de projeto</p>
                        </div>
                    </div>
                    <div class="status-item">
                        <div class="status-icon">
                            <i class="fas fa-link"></i>
                        </div>
                        <div class="status-content">
                            <h4 id="correlacoes-feitas">0 / 0</h4>
                            <p>Correlações analisadas</p>
                        </div>
                    </div>
                    <div class="status-item">
                        <div class="status-icon">
                            <i class="fas fa-chart-pie"></i>
                        </div>
                        <div class="status-content">
                            <h4 id="progresso-percentual">0%</h4>
                            <p>Progresso</p>
                        </div>
                    </div>
                </div>
                <div class="progress-bar">
                    <div class="progress-fill" id="progress-fill" style="width: 0%"></div>
                </div>
            </div>

            <!-- Aviso se não há requisitos suficientes -->
            <div id="insufficient-requirements" class="card alert-card" style="display: none;">
                <div class="alert-content">
                    <div class="alert-icon">
                        <i class="fas fa-exclamation-triangle"></i>
                    </div>
                    <div class="alert-text">
                        <h3>Requisitos Insuficientes</h3>
                        <p>É necessário ter pelo menos 2 requisitos de projeto cadastrados para realizar a análise de correlação.</p>
                        <a href="requisitos-projeto.html" class="btn btn-primary">
                            <i class="fas fa-plus"></i> Adicionar Requisitos de Projeto
                        </a>
                    </div>
                </div>
            </div>

            <!-- Legenda das correlações -->
            <div id="correlation-legend" class="card info-card" style="display: none;">
                <div class="card-header">
                    <h3 class="card-title"><i class="fas fa-info-circle"></i> Tipos de Correlação</h3>
                </div>
                <div class="correlation-types">
                    <div class="correlation-type">
                        <div class="correlation-symbol strong-positive">++</div>
                        <div class="correlation-info">
                            <h4>Correlação Positiva Muito Forte</h4>
                            <p>Os requisitos se reforçam mutuamente. Melhorar um ajuda significativamente o outro.</p>
                        </div>
                    </div>
                    <div class="correlation-type">
                        <div class="correlation-symbol positive">+</div>
                        <div class="correlation-info">
                            <h4>Correlação Positiva</h4>
                            <p>Os requisitos se complementam. Melhorar um pode ajudar o outro.</p>
                        </div>
                    </div>
                    <div class="correlation-type">
                        <div class="correlation-symbol neutral">0</div>
                        <div class="correlation-info">
                            <h4>Sem Correlação</h4>
                            <p>Os requisitos são independentes. Um não afeta o outro.</p>
                        </div>
                    </div>
                    <div class="correlation-type">
                        <div class="correlation-symbol negative">-</div>
                        <div class="correlation-info">
                            <h4>Correlação Negativa</h4>
                            <p>Os requisitos competem entre si. Melhorar um pode prejudicar o outro.</p>
                        </div>
                    </div>
                    <div class="correlation-type">
                        <div class="correlation-symbol strong-negative">--</div>
                        <div class="correlation-info">
                            <h4>Correlação Negativa Muito Forte</h4>
                            <p>Os requisitos são conflitantes. Melhorar um prejudica significativamente o outro.</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Matriz de correlação (telhado) -->
            <div id="correlation-section" class="card" style="display: none;">
                <div class="card-header">
                    <h3 class="card-title">
                        <i class="fas fa-home"></i> Telhado da Casa QFD - Matriz de Correlação
                        <button class="btn btn-sm btn-secondary" onclick="resetCorrelations()" style="margin-left: 1rem;">
                            <i class="fas fa-undo"></i> Resetar Correlações
                        </button>
                    </h3>
                </div>
                
                <div class="correlation-instructions">
                    <h4><i class="fas fa-question-circle"></i> Como Analisar:</h4>
                    <p><strong>Para cada par de requisitos, considere:</strong></p>
                    <ul>
                        <li>Se melhorar um requisito ajuda ou prejudica o outro</li>
                        <li>Se existe sinergia ou conflito entre eles</li>
                        <li>Se são independentes ou relacionados</li>
                    </ul>
                    <p><strong>Clique em cada célula</strong> para definir o tipo de correlação entre os requisitos.</p>
                </div>

                <div class="roof-container">
                    <div class="roof-matrix" id="roof-matrix">
                        <!-- Matriz triangular será gerada dinamicamente -->
                    </div>
                </div>
            </div>

            <!-- Modal para preenchimento instantâneo de correlações -->
            <div id="correlation-modal" class="modal" style="display: none;">
                <div class="modal-content">
                    <div class="modal-header">
                        <h3 id="modal-title">Definir Correlação</h3>
                        <button class="modal-close" onclick="closeCorrelationModal()">&times;</button>
                    </div>
                    <div class="modal-body">
                        <div id="modal-requisitos" class="modal-requisitos"></div>
                        <div class="correlation-options">
                            <button class="correlation-btn strong-positive" onclick="setCorrelation('++')" title="Correlação Positiva Muito Forte (Tecla: *)">++</button>
                            <button class="correlation-btn positive" onclick="setCorrelation('+')" title="Correlação Positiva (Tecla: +)">+</button>
                            <button class="correlation-btn neutral" onclick="setCorrelation('0')" title="Sem Correlação (Tecla: 0)">0</button>
                            <button class="correlation-btn negative" onclick="setCorrelation('-')" title="Correlação Negativa (Tecla: -)">-</button>
                            <button class="correlation-btn strong-negative" onclick="setCorrelation('--')" title="Correlação Negativa Muito Forte (Tecla: /)">--</button>
                        </div>
                        <div class="keyboard-shortcuts">
                            <p><strong>Atalhos de teclado:</strong> * = ++, + = +, 0 = 0, - = -, / = --</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Análise das correlações -->
            <div id="analysis-section" class="card" style="display: none;">
                <div class="card-header">
                    <h3 class="card-title">
                        <i class="fas fa-chart-bar"></i> Análise das Correlações
                        <button class="btn btn-sm btn-secondary" onclick="exportAnalysis()" style="margin-left: 1rem;">
                            <i class="fas fa-download"></i> Exportar Análise
                        </button>
                    </h3>
                </div>
                
                <div class="analysis-content">
                    <div class="analysis-filters">
                        <button class="filter-btn" onclick="filterAnalysis('all')"><i class="fas fa-list"></i> Todas</button>
                        <button class="filter-btn" onclick="filterAnalysis('strong-positive')"><i class="fas fa-arrow-up"></i> Muito Fortes Positivas</button>
                        <button class="filter-btn" onclick="filterAnalysis('positive')"><i class="fas fa-plus"></i> Positivas</button>
                        <button class="filter-btn" onclick="filterAnalysis('neutral')"><i class="fas fa-minus"></i> Sem Correlacao</button>
                        <button class="filter-btn" onclick="filterAnalysis('negative')"><i class="fas fa-arrow-down"></i> Negativas</button>
                        <button class="filter-btn" onclick="filterAnalysis('strong-negative')"><i class="fas fa-ban"></i> Muito Fortes Negativas</button>
                    </div>
                    <div class="correlation-summary" id="correlation-summary">
                        <!-- Resumo será gerado dinamicamente -->
                    </div>
                    
                    <div class="conflict-analysis" id="conflict-analysis">
                        <!-- Análise de conflitos será gerada dinamicamente -->
                    </div>
                    
                    <div class="synergy-analysis" id="synergy-analysis">
                        <!-- Análise de sinergias será gerada dinamicamente -->
                    </div>
                </div>
            </div>

            <!-- Dicas e orientações -->
            <div class="card info-card">
                <div class="card-header">
                    <h3 class="card-title"><i class="fas fa-lightbulb"></i> Dicas para Análise de Correlação</h3>
                </div>
                <div class="tips-grid">
                    <div class="tip-item">
                        <div class="tip-icon">
                            <i class="fas fa-balance-scale"></i>
                        </div>
                        <div class="tip-content">
                            <h4>Pense em Trade-offs</h4>
                            <p>Considere se melhorar um requisito pode prejudicar outro (ex: velocidade vs. precisão).</p>
                        </div>
                    </div>
                    <div class="tip-item">
                        <div class="tip-icon">
                            <i class="fas fa-handshake"></i>
                        </div>
                        <div class="tip-content">
                            <h4>Identifique Sinergias</h4>
                            <p>Procure requisitos que se beneficiam mutuamente quando melhorados.</p>
                        </div>
                    </div>
                    <div class="tip-item">
                        <div class="tip-icon">
                            <i class="fas fa-eye"></i>
                        </div>
                        <div class="tip-content">
                            <h4>Seja Realista</h4>
                            <p>Base sua análise em conhecimento técnico e experiência prática.</p>
                        </div>
                    </div>
                    <div class="tip-item">
                        <div class="tip-icon">
                            <i class="fas fa-exclamation-triangle"></i>
                        </div>
                        <div class="tip-content">
                            <h4>Foque nos Conflitos</h4>
                            <p>Correlações negativas são especialmente importantes para o design do produto.</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Navegação -->
            <div class="page-navigation">
                <a href="requisitos-projeto.html" class="btn btn-secondary">
                    <i class="fas fa-arrow-left"></i> Voltar: Requisitos Projeto
                </a>
                <a href="matriz-qfd.html" class="btn btn-primary" id="btn-proximo">
                    Próximo: Matriz QFD <i class="fas fa-arrow-right"></i>
                </a>
            </div>
        </div>
    </main>

    <footer class="footer">
        <div class="container">
            <p>&copy; 2024 Sistema QFD - Desenvolvido para Engenheiros de Produto</p>
            <p style="font-size: 0.85rem; margin-top: 10px; opacity: 0.8;">
                Este site foi gerado através da inteligência artificial <strong>Manus AI</strong>, com prompt gerado pelo <strong>Engenheiro Marlon Soares Sigales</strong>.
                Os códigos estão abertos para quem quiser utilizar e ajustar no GitHub: <a href="https://github.com/Psykozis/QFD" target="_blank" style="color: #667eea;">https://github.com/Psykozis/QFD</a>.
                Cópias são permitidas desde que devidamente citadas.
            </p>
        </div>
    </footer>

    <script src="../js/database.js"></script>
    <script src="../js/correlacao-projeto.js"></script>
</body>
</html>

